{"ast":null,"code":"import{useState,useEffect}from'react';import{toast}from'react-toastify';import{getRandomQuote}from'./quotes';const DEFAULT_SETTINGS={work:25*60,shortBreak:5*60,longBreak:15*60};export const useTimer=()=>{const[settings,setSettings]=useState(JSON.parse(localStorage.getItem('timerSettings'))||DEFAULT_SETTINGS);const[time,setTime]=useState(settings.work);const[isActive,setIsActive]=useState(false);const[type,setType]=useState('work');const[showConfetti,setShowConfetti]=useState(false);useEffect(()=>{localStorage.setItem('timerSettings',JSON.stringify(settings));},[settings]);useEffect(()=>{let interval;if(isActive&&time>0){interval=setInterval(()=>{setTime(time=>time-1);},1000);}else if(time===0){handleTimerComplete();}return()=>clearInterval(interval);},[isActive,time]);const handleTimerComplete=()=>{setIsActive(false);setShowConfetti(true);// Show notification\ntoast.success(`${type.charAt(0).toUpperCase()+type.slice(1)} session completed!`,{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true});// Hide confetti after 5 seconds\nsetTimeout(()=>setShowConfetti(false),5000);};const changeType=newType=>{setIsActive(false);setType(newType);setTime(settings[newType]);};const updateSettings=newSettings=>{setSettings(newSettings);setTime(newSettings[type]);};const[currentQuote,setCurrentQuote]=useState(null);const startTimer=()=>{setIsActive(true);const quote=getRandomQuote();setCurrentQuote(quote);toast.info(`\"${quote.text}\" - ${quote.author}`,{position:\"top-center\",autoClose:4000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true});};return{time,isActive,type,settings,showConfetti,setTime,setIsActive,setType,changeType,updateSettings,currentQuote,startTimer};};","map":{"version":3,"names":["useState","useEffect","toast","getRandomQuote","DEFAULT_SETTINGS","work","shortBreak","longBreak","useTimer","settings","setSettings","JSON","parse","localStorage","getItem","time","setTime","isActive","setIsActive","type","setType","showConfetti","setShowConfetti","setItem","stringify","interval","setInterval","handleTimerComplete","clearInterval","success","charAt","toUpperCase","slice","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","setTimeout","changeType","newType","updateSettings","newSettings","currentQuote","setCurrentQuote","startTimer","quote","info","text","author"],"sources":["/Users/HariPrasad.Renganath/Documents/Temp Projects/Pomodoro clock/pomodoro-timer/src/hooks/useTimer.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { getRandomQuote } from './quotes';\n\nconst DEFAULT_SETTINGS = {\n  work: 25 * 60,\n  shortBreak: 5 * 60,\n  longBreak: 15 * 60\n};\n\nexport const useTimer = () => {\n  const [settings, setSettings] = useState(\n    JSON.parse(localStorage.getItem('timerSettings')) || DEFAULT_SETTINGS\n  );\n  const [time, setTime] = useState(settings.work);\n  const [isActive, setIsActive] = useState(false);\n  const [type, setType] = useState('work');\n  const [showConfetti, setShowConfetti] = useState(false);\n\n  useEffect(() => {\n    localStorage.setItem('timerSettings', JSON.stringify(settings));\n  }, [settings]);\n\n  useEffect(() => {\n    let interval;\n    if (isActive && time > 0) {\n      interval = setInterval(() => {\n        setTime((time) => time - 1);\n      }, 1000);\n    } else if (time === 0) {\n      handleTimerComplete();\n    }\n    return () => clearInterval(interval);\n  }, [isActive, time]);\n\n  const handleTimerComplete = () => {\n    setIsActive(false);\n    setShowConfetti(true);\n    \n    // Show notification\n    toast.success(`${type.charAt(0).toUpperCase() + type.slice(1)} session completed!`, {\n      position: \"top-right\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    });\n\n    // Hide confetti after 5 seconds\n    setTimeout(() => setShowConfetti(false), 5000);\n  };\n\n  const changeType = (newType) => {\n    setIsActive(false);\n    setType(newType);\n    setTime(settings[newType]);\n  };\n\n  const updateSettings = (newSettings) => {\n    setSettings(newSettings);\n    setTime(newSettings[type]);\n  };\n\n  const [currentQuote, setCurrentQuote] = useState(null);\n\n  const startTimer = () => {\n    setIsActive(true);\n    const quote = getRandomQuote();\n    setCurrentQuote(quote);\n    toast.info(`\"${quote.text}\" - ${quote.author}`, {\n      position: \"top-center\",\n      autoClose: 4000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    });\n  };\n\n  return { \n    time, \n    isActive, \n    type, \n    settings,\n    showConfetti,\n    setTime, \n    setIsActive, \n    setType,\n    changeType,\n    updateSettings,\n    currentQuote,\n    startTimer\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}